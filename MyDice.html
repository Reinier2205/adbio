<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3D Dice Roller</title>
<style>
  html, body {
    margin: 0; padding: 0;
    width: 100%; height: 100%;
    overflow: hidden;
    background: #111;
    color: #fff;
    font-family: sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    -webkit-user-select: none;
    user-select: none;
  }
  #setup, #game { display: none; text-align: center; }
  .dice-container {
    display: flex;
    gap: 60px;
    margin-top: 30px;
    perspective: 1400px;
  }
  .dice {
    width: 150px; height: 150px;
    position: relative;
    transform-style: preserve-3d;
    transition: transform 1s cubic-bezier(.36,1.56,.3,1);
  }
  .face {
    position: absolute;
    width: 150px; height: 150px;
    border-radius: 20px;
    display: grid;
    grid-template-columns: repeat(3,1fr);
    grid-template-rows: repeat(3,1fr);
    justify-items: center; align-items: center;
    box-shadow: inset 0 0 12px rgba(0,0,0,0.6);
  }
  .pip {
    width: 28px; height: 28px;
    border-radius: 50%;
  }

  /* Themes */
  .classic { background: #fff; }
  .classic .pip { background: #000; }

  .neon { background: #000; }
  .neon .pip { background: #0ff; box-shadow: 0 0 10px #0ff; }

  .wood { background: linear-gradient(145deg,#8b5a2b,#deb887); }
  .wood .pip { background: #fff; }

  .marble { background: radial-gradient(circle at 30% 30%, #f8f8f8, #c0c0c0); }
  .marble .pip { background: #000; }

  .gold { background: linear-gradient(145deg,#FFD700,#B8860B); }
  .gold .pip { background: #111; }

  .casino { background: #b30000; }
  .casino .pip { background: #fff; }

  /* 3D positioning */
  .front  { transform: rotateY(0deg) translateZ(75px); }
  .back   { transform: rotateY(180deg) translateZ(75px); }
  .right  { transform: rotateY(90deg) translateZ(75px); }
  .left   { transform: rotateY(-90deg) translateZ(75px); }
  .top    { transform: rotateX(90deg) translateZ(75px); }
  .bottom { transform: rotateX(-90deg) translateZ(75px); }

  button, select {
    padding: 10px 20px; margin: 10px;
    font-size: 16px;
    border: none; border-radius: 8px;
    cursor: pointer;
  }
  button { background: #ff4081; color: #fff; }
  select { background: #333; color: #fff; }
</style>
</head>
<body>
  <div id="setup">
    <h2>ðŸŽ² 3D Dice Roller</h2>
    <label>Dice Count:
      <select id="diceCount">
        <option value="1">1 Die</option>
        <option value="2">2 Dice</option>
      </select>
    </label>
    <br>
    <label>Theme:
      <select id="theme">
        <option value="classic">Classic</option>
        <option value="neon">Neon</option>
        <option value="wood" selected>Wood</option>
        <option value="marble">Marble</option>
        <option value="gold">Gold</option>
        <option value="casino">Casino Red</option>
      </select>
    </label>
    <br>
    <button id="start">Start Game</button>
  </div>

  <div id="game">
    <h2>Tap Anywhere to Roll</h2>
    <div class="dice-container" id="diceContainer"></div>
  </div>

<script>
const setup = document.getElementById("setup");
const game = document.getElementById("game");
const startBtn = document.getElementById("start");
const diceContainer = document.getElementById("diceContainer");
const saved = JSON.parse(localStorage.getItem("diceSetup")||"{}");

if(saved.diceCount){ document.getElementById("diceCount").value = saved.diceCount; }
if(saved.theme){ document.getElementById("theme").value = saved.theme; }

setup.style.display = "block";

// pip placement grid positions
function pipPattern(value){
  const layouts = {
    1: [4],
    2: [0,8],
    3: [0,4,8],
    4: [0,2,6,8],
    5: [0,2,4,6,8],
    6: [0,2,3,5,6,8]
  };
  return layouts[value];
}

function createFace(value, theme, name){
  const face = document.createElement("div");
  face.className = "face " + theme + " " + name;
  for(let i=0;i<9;i++){
    if(pipPattern(value).includes(i)){
      const pip = document.createElement("div");
      pip.className = "pip";
      face.appendChild(pip);
    } else {
      const empty = document.createElement("div");
      face.appendChild(empty);
    }
  }
  return face;
}

function createDice(theme){
  const dice = document.createElement("div");
  dice.className = "dice";
  const faces = [
    {name:"front", value:1},
    {name:"back", value:6},
    {name:"right", value:3},
    {name:"left", value:4},
    {name:"top", value:5},
    {name:"bottom", value:2}
  ];
  faces.forEach(f=>{
    dice.appendChild(createFace(f.value, theme, f.name));
  });
  return dice;
}

startBtn.onclick = () => {
  const count = document.getElementById("diceCount").value;
  const theme = document.getElementById("theme").value;
  localStorage.setItem("diceSetup", JSON.stringify({diceCount:count, theme:theme}));
  setup.style.display = "none";
  game.style.display = "block";
  diceContainer.innerHTML = "";
  for (let i = 0; i < count; i++) {
    diceContainer.appendChild(createDice(theme));
  }
};

document.body.addEventListener("click", () => {
  [...diceContainer.children].forEach(dice => {
    const x = 360*2 + [0,90,180,270][Math.floor(Math.random()*4)];
    const y = 360*2 + [0,90,180,270][Math.floor(Math.random()*4)];
    const z = 360*2 + [0,90,180,270][Math.floor(Math.random()*4)];
    dice.style.transform = `rotateX(${x}deg) rotateY(${y}deg) rotateZ(${z}deg)`;
  });
});
</script>
</body>
</html>