<!DOCTYPE html>
<html lang="af">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Die Rooftoppers - Krugerwildtuin Toer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles based on your style guide */
        body {
            background-color: #0f172a;
            background-image: linear-gradient(180deg, #1e293b 0%, #0f172a 100%);
            font-family: sans-serif;
            color: #cbd5e1;
        }

        .card {
            background-color: rgba(30, 41, 59, 0.85);
            border: 1px solid #232946;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }

        .heading-2 {
            font-size: 2.25rem;
            font-weight: 700;
            color: #ffffff;
        }

        .body {
            color: #cbd5e1;
            font-size: 1.125rem;
            line-height: 1.75rem;
        }
        
        .btn {
            display: inline-block;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            text-align: center;
            font-weight: 600;
            text-decoration: none;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
            flex-grow: 1;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn-primary {
            background-color: #3b82f6;
            color: #ffffff;
        }

        .btn-primary:hover {
            background-color: #2563eb;
        }
        
        .collapsible {
            background-color: #374151;
            color: #ffffff;
            cursor: pointer;
            padding: 18px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 1.1rem;
            transition: 0.4s;
            border-radius: 0.5rem;
            margin-top: 0.5rem;
        }

        .active, .collapsible:hover {
            background-color: #4b5563;
        }
        
        .content {
            padding: 0 18px;
            overflow: hidden;
            max-height: 0;
            transition: max-height 0.2s ease-out;
            background-color: #1e293b;
            border-radius: 0.5rem;
            margin-top: 0.5rem;
        }

        .content p {
            padding: 1rem 0;
        }
        
        .section-details {
            padding: 1rem;
        }

        .section-header {
            font-weight: bold;
            color: #93c5fd;
            margin-top: 1rem;
            margin-bottom: 0.5rem;
        }

        /* Flexbox for side-by-side buttons */
        .button-group {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            justify-content: flex-end;
        }
        .route-title-btn {
            background-color: #374151;
            color: #ffffff;
            cursor: pointer;
            padding: 18px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 1.1rem;
            transition: 0.4s;
            border-radius: 0.5rem;
            margin-top: 0.5rem;
        }
        .route-title-btn:hover {
            background-color: #4b5563;
        }

    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <main class="card p-8 max-w-2xl w-full text-center">
        <a href="https://savemylinks.pages.dev/feature-guide" target="_blank" class="block w-16 h-16 mx-auto mb-6">
            <img src="https://savemylinks.pages.dev/images/logo.png" alt="Rooftoppers Logo" class="rounded-xl bg-[#181C2A] object-contain">
        </a>
        
        <h1 class="heading-2 mb-4">
            Hallo Rooftoppers!
        </h1>

        <p class="body mb-8">
            Ons Krugerwildtuin-avontuur wag. Hier is die Google Maps roetes vir elke dag, met inligting vir elke deel van die roete. Tobias het al die hardewerk, navorsing en beplanning gedoen, ek en 'n AI pêl het net die inkleur werk gedoen. 
        </p>

        <div class="space-y-4">
            <div class="flex items-center space-x-4">
                <button class="route-title-btn collapsible flex-grow text-left">Roete: Dag 1: Malelane -> Skukuza (Pretoriuskop picnic)</button>
                <a href="https://maps.app.goo.gl/yh6jfKpsDgmQr2nH9?g_st=ic" target="_blank" class="btn btn-primary flex-shrink-0">Roete</a>
            </div>
            <div class="content">
                <div class="section-details">
                    <div class="section-header">1. Van Malelanehek na Pretoriuskop</div>
                    <p>Die reis begin by die majestueuse <strong>Malelanehek</strong>. Terwyl julle die park binnegaan, hou julle oë oop vir die grasvlaktes en golwende heuwels, 'n unieke landskap wat verskil van die res van die Krugerwildtuin. Hier is die kanse goed om die skaars <strong>swartwitpens</strong> te sien, wat hierdie gebied hulle tuiste maak.</p>
                    
                    <div class="section-header">A: Afsaal Picnic Spot</div>
                    <p>Hierdie historiese piekniekplek was 'n ou rusplek vir die Voortrekkers. Stop vir 'n vinnige versnapering en geniet die rustigheid van die omgewing. Hou 'n oog op die watergat in die verte vir besoekers.</p>

                    <div class="section-header">B: Pretoriuskop Rest Camp</div>
                    <p>By <strong>Pretoriuskop</strong>, die oudste ruskamp in die park, kan julle die geskiedenis voel. Die kamp is vernoem na die Voortrekkerleier Marthinus Wessel Pretorius en die hutte is gerangskik soos 'n ou laer. Die granietkoppies rondom die kamp is uitstekende habitat vir <strong>luiperds</strong> en <strong>klipspringers</strong>. </p>
                    
                    <div class="section-header">C: Cawuke Waterhole</div>
                    <p>Ry na die <strong>Cawuke Waterhole</strong>, 'n plek wat dikwels deur groot troppe wild besoek word. Hier het julle 'n goeie kans om <strong>witrenosters</strong> te sien wat kom water drink, of selfs 'n trop <strong>olifante</strong> wat in die modder speel. Dit is 'n perfekte plek om 'n rukkie te wag en te kyk wat die natuur aanbied.</p>

                    <div class="section-header">D: Lake Panic Bird Hide</div>
                    <p>Die <strong>Lake Panic Bird Hide</strong> is 'n absolute moet-sien! Hier is julle op ooghoogte met die water, ideaal vir fotografie. Verwag om 'n ongelooflike verskeidenheid watervoëls te sien, van kleurvolle <strong>visvangers</strong> tot elegante <strong>reiers</strong>. Die water is altyd lewendig met <strong>seekoeie</strong> en <strong>krokodille</strong>, en soms kom 'n <strong>luiperd</strong> hier water drink.</p>

                    <div class="section-header">E: Skukuza Golf Club</div>
                    <p>Julle kan 'n draai by die <strong>Skukuza Gholfklub</strong> maak, beroemd daarvoor dat dit nie omhein is nie. Moenie verbaas wees as julle <strong>seekoeie</strong> of <strong>impala's</strong> op die setperke sien nie! Die restaurant is 'n goeie plek om die dag se avonture af te sluit.</p>
                    
                    <div class="section-header">F: Skukuza Campsite</div>
                    <p>Julle dag eindig by die hart van die Krugerwildtuin, <strong>Skukuza Campsite</strong>. Dit is die grootste kamp in die park en bied al die fasiliteite wat julle benodig vir 'n gemaklike aand.</p>
                </div>
            </div>

            <div class="flex items-center space-x-4">
                <button class="route-title-btn collapsible flex-grow text-left">Roete: Dag 2: Skukuza -> Satara (Nhlanguleni Picnic)</button>
                <a href="https://maps.app.goo.gl/sr9yXJNxzZMec4ix7?g_st=ic" target="_blank" class="btn btn-primary flex-shrink-0">Roete</a>
            </div>
            <div class="content">
                <div class="section-details">
                    <div class="section-header">1. Van Skukuza na Tshokwane</div>
                    <p>Julle reis noordoos vanaf die hoofkamp, op pad na die sentrale bosveld. Die roete na <strong>Tshokwane</strong> is bekend vir sy hoë wilddigtheid, veral in die oggend. Hou julle oë oop vir die moontlikheid om <strong>leeus</strong> en <strong>olifante</strong> te sien.</p>
                    
                    <div class="section-header">A: Tshokwane Picnic Spot</div>
                    <p>Die <strong>Tshokwane Piekniekplek</strong> is 'n tradisionele stilhouplek vir reisigers. Hier kan julle rustig 'n piekniek geniet onder die bome, terwyl <strong>blou-ape</strong> julle dophou. Dis 'n goeie plek om op te vul voordat julle die pad verder vat.</p>

                    <div class="section-header">B: Trichardt Memorial</div>
                    <p>By die <strong>Trichardt Memorial</strong> stop julle vir 'n oomblik van geskiedenis. Dit is 'n monument wat opgerig is ter ere van Louis Trichardt en sy trekgeselskap. Dit is 'n herinnering aan die ryk geskiedenis van die gebied.</p>

                    <div class="section-header">C: Nhlanguleni Picnic Spot</div>
                    <p>Vanaf die monument ry julle na <strong>Nhlanguleni Piekniekplek</strong>. Hierdie piekniekplek is geleë in 'n pragtige, rustige area en is 'n ideale plek vir 'n middagete. Dit is 'n goeie plek om weg te kom van die meer bedrywige paaie en die natuur rustig te geniet.</p>

                    <div class="section-header">D: Mhisanamond Dam & E: Marheya Waterhole</div>
                    <p>Julle volgende stops is twee watergate: die <strong>Mhisanamond Dam</strong> en die <strong>Marheya Waterhole</strong>. Hierdie is lewensare vir die diere van die Krugerwildtuin, en die kanse is goed om verskillende soorte wild te sien wat kom drink. Kyk vir <strong>koedoes</strong>, <strong>kameelperde</strong>, en selfs <strong>wildewildehonde</strong> wat die omgewing gebruik.</p>

                    <div class="section-header">F: Welverdiend Waterhole</div>
                    <p>Die <strong>Welverdiend Waterhole</strong> is ook 'n bekende plek vir wildbesigtiging. Ry stadig en skandeer die omgewing vir beweging. Hier het julle nog 'n kans om daardie spesiale oomblik te beleef wanneer die groot vyf se paaie kruis.</p>

                    <div class="section-header">G: Babardraai</div>
                    <p>Die roete lei julle verby <strong>Babardraai</strong>, 'n historiese punt in die wildtuin se geskiedenis. Dit is 'n herinnering aan die pioniers wat hierdie paaie eerste begaan het.</p>

                    <div class="section-header">H: Satara Rest Camp</div>
                    <p>Julle dag eindig by <strong>Satara Rest Camp</strong>. Dit is bekend as die "leeu-wêreld" van die Krugerwildtuin en is die perfekte plek om die dag se avonture af te sluit.</p>
                </div>
            </div>

            <div class="flex items-center space-x-4">
                <button class="route-title-btn collapsible flex-grow text-left">Roete: Dag 3: Satara -> Laer Sabie (Tshokwane picnic)</button>
                <a href="https://maps.app.goo.gl/tYHuSth3ABoa8qdo7?g_st=ic" target="_blank" class="btn btn-primary flex-shrink-0">Roete</a>
            </div>
            <div class="content">
                <div class="section-details">
                    <div class="section-header">1. Van Satara Ruskamp na Shibotwana Waterhole</div>
                    <p>Vanaf <strong>Satara</strong> ry julle op die bekende S100-pad, wat bekend is vir uitstekende wildkykgeleenthede. Julle begin in die hartjie van die Sentrale Savanne, die tuiste van die <strong>groot katte</strong>. Hou julle oë oop vir die bekende Satara-leeutroppe terwyl julle op pad is na die watergat.</p>
                    
                    <div class="section-header">A: Shibotwana Waterhole</div>
                    <p>Hierdie watergat is 'n ware trekpleister. Die oop landskap bied uitstekende sigbaarheid, en julle kan verwag om groot troppe <strong>sebras</strong>, <strong>blouwildebeeste</strong> en <strong>impala's</strong> te sien wat kom drink. Dis die perfekte plek om 'n verskeidenheid wild in een area te sien.</p>

                    <div class="section-header">B: River Viewpoint (Nwanedzi) & C: Sweni Game/Bird Hide</div>
                    <p>Julle reis verder na die <strong>Nwanedzi River Viewpoint</strong> en die <strong>Sweni Wild-/Voëlskuiling</strong>. Hier verander die landskap na 'n digter bosveld langs die rivier. Die skuiling is 'n uitstekende plek om <strong>watervoëls</strong> te sien, en die rivier is 'n lewenslyn vir <strong>olifante</strong> en <strong>buffels</strong>.</p>
                    
                    <div class="section-header">D: Mafagalamba Waterhole & E: Tshokwane Rangers Post</div>
                    <p>Die roete lei julle verby die <strong>Mafagalamba Waterhole</strong> en na die <strong>Tshokwane Rangers Post</strong>. Hierdie gebied is deel van die sentrale bosveld, en julle kan meer bosdiere soos <strong>koedoes</strong>, <strong>bosbokke</strong> en selfs <strong>luiperds</strong> wat in die digter bosse skuiling soek, sien.</p>

                    <div class="section-header">F: Lower Sabie Restcamp Campsite</div>
                    <p>Julle dag eindig by die oewers van die Sabierivier by <strong>Lower Sabie</strong>. Hierdie kamp is beroemd vir sy asemrowende uitsigte oor die rivier, met talle <strong>seekoeie</strong> en <strong>krokodille</strong> wat die water hulle tuiste noem. Dit is die perfekte plek om die dag se avonture te geniet en die sonsondergang te kyk.</p>
                </div>
            </div>

            <div class="flex items-center space-x-4">
                <button class="route-title-btn collapsible flex-grow text-left">Roete: Dag 4: Laer Sabie -> Berg-en-Dal (Afsaal picnic)</button>
                <a href="https://maps.app.goo.gl/VV8nDhBRrDgVPBRA7?g_st=ic" target="_blank" class="btn btn-primary flex-shrink-0">Roete</a>
            </div>
            <div class="content">
                <div class="section-details">
                    <div class="section-header">1. Van Lower Sabie na Afsaal Picnic Spot</div>
                    <p>Julle laaste dag begin langs die Sabierivier. Die roete is een van die mees skilderagtige in die park, met digte rivierbosveld wat geleidelik na oop savanne verander. Hou 'n oog oop vir die <strong>Groot Vyf</strong> wat dikwels langs hierdie roete gesien word.</p>
                    
                    <div class="section-header">A: Gomondwane Waterhole & B: Mpondo Dam Viewpoint</div>
                    <p>Julle eerste stopplekke is die <strong>Gomondwane Waterhole</strong> en die <strong>Mpondo Dam Viewpoint</strong>. Hierdie is albei uitstekende plekke vir wildbesigtiging, veral in die droë seisoen. Mpondo Dam is ook 'n bekende plek vir <strong>buffels</strong> en <strong>olifante</strong>.</p>

                    <div class="section-header">C: Afsaal Picnic Spot</div>
                    <p>By <strong>Afsaal Piekniekplek</strong> kan julle vir die laaste keer 'n piekniek in die hart van die Krugerwildtuin geniet. Hierdie plek het 'n ryk geskiedenis en is 'n herinnering aan die pioniersdae van die Krugerwildtuin.</p>
                    
                    <div class="section-header">D: Jock Of The Bushveld Plaque & E: Berg-en-Dal Restcamp</div>
                    <p>Julle roete lei julle verby die <strong>Jock Of The Bushveld Plaque</strong>, 'n huldeblyk aan die beroemde verhaal van Jock en sy eienaar. Dit is 'n gepaste manier om julle Kruger-avontuur te beëindig. Die reis eindig by <strong>Berg-en-Dal Ruskamp</strong>, 'n pragtige kamp in die heuwelagtige terrein. Hierdie area is uitstekende <strong>renoster</strong>- en <strong>luiperd</strong>-habitat.</p>
                </div>
            </div>

			<div class="flex items-center space-x-4">
				<button class="route-title-btn collapsible flex-grow text-left">Watergate: Verken Watergate & Skuilings</button>
				<a href="https://www.sanparks.org/parks/kruger" target="_blank" class="btn btn-primary flex-shrink-0">Info</a>
			</div>
			<div class="content">
				<div class="section-details text-left">
					<div class="section-header">Soek en ontdek</div>
					<p>Gebruik die soekfunksie om 'n watergat by naam te vind. Kies uit die voorstelle, druk Enter, of klik om die kaart te laat uitlig en fokus.</p>

					<div class="mt-4">
						<div id="region-filters" class="flex flex-wrap gap-2 mb-3">
							<button class="px-3 py-1.5 rounded-full border border-slate-600 text-slate-200 bg-slate-700/60 hover:bg-slate-600 active" data-region="all">Almal</button>
							<button class="px-3 py-1.5 rounded-full border border-slate-600 text-slate-200 bg-slate-700/60 hover:bg-slate-600" data-region="malelane">Malelane / Berg-en-Dal</button>
							<button class="px-3 py-1.5 rounded-full border border-slate-600 text-slate-200 bg-slate-700/60 hover:bg-slate-600" data-region="skukuza">Skukuza</button>
							<button class="px-3 py-1.5 rounded-full border border-slate-600 text-slate-200 bg-slate-700/60 hover:bg-slate-600" data-region="lower-sabie">Laer Sabie</button>
							<button class="px-3 py-1.5 rounded-full border border-slate-600 text-slate-200 bg-slate-700/60 hover:bg-slate-600" data-region="satara">Satara</button>
						</div>
						<div class="relative">
						<label for="waterhole-search" class="sr-only">Soek watergat</label>
						<input id="waterhole-search" type="text" placeholder="Soek watergat… (bv. Sunset Dam, Lake Panic)" class="w-full rounded-md bg-slate-700/70 border border-slate-600 px-4 py-3 text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" />
						<ul id="search-suggestions" class="absolute z-10 mt-2 w-full bg-slate-800/95 border border-slate-700 rounded-md shadow-lg hidden max-h-64 overflow-auto"></ul>
						</div>

					<div class="section-header">Watergate Kaartjies</div>
					<div id="waterhole-grid" class="grid grid-cols-1 gap-4"></div>
				</div>
			</div>
        </div>
        
        <p class="body mt-8 text-sm text-slate-400">
            Geniet die avontuur! 🐘
        </p>

    </main>

    <script>
        var coll = document.getElementsByClassName("collapsible");
        
        for (var i = 0; i < coll.length; i++) {
            coll[i].addEventListener("click", function() {
                var currentContent = this.parentElement.nextElementSibling;
                var isActive = this.classList.contains("active");

                // Sluit alle oop afdelings
                for (var j = 0; j < coll.length; j++) {
                    coll[j].classList.remove("active");
                    coll[j].parentElement.nextElementSibling.style.maxHeight = null;
                }

                // Maak die geselekteerde een oop as dit nie reeds oop was nie
                if (!isActive) {
                    this.classList.add("active");
                    currentContent.style.maxHeight = currentContent.scrollHeight + "px";
                }
            });
        }

        // Waterhole data (Afrikaans labels, same palette)
        const waterholesData = [
            { name: "Matjulu Watergat", region: "malelane", location: "S110 naby Malelane", facts: "Uitstekend vir oggendrewe. Goeie sig vir witrenosters.", lat: -25.5391, lon: 31.5177, animals: ["Witrenoster","Olifant","Sebras","Blouwildebees","Koedoe","Impala"] },
            { name: "Gardenia Skuiling (Mpondo Dam)", region: "malelane", location: "Net af van H3", facts: "Top vir voëlkyk. Seekoeie en krokodille permanent.", lat: -25.3785, lon: 31.5302, animals: ["Seekoei","Krokodil","Olifant","Waterbok","Voëls"] },
            { name: "Mathekanyane Watergat", region: "berg-en-dal", location: "Noord van Berg-en-Dal op S110", facts: "Bekend vir luiperd in rotsrifte.", lat: -25.4322, lon: 31.4789, animals: ["Luiperd","Koedoe","Kameelperd","Olifant","Impala"] },
            { name: "Lake Panic Skuiling", region: "skukuza", location: "Naby Skukuza gholfklub", facts: "Beste voëlskuiling. Reusevisvanger hoogtepunt.", lat: -24.9926, lon: 31.5794, animals: ["Seekoei","Krokodil","Reusevisvanger","Visarend","Olifant","Bosbok"] },
            { name: "De Laporte Watergat", region: "skukuza", location: "H1-1 noord van Skukuza", facts: "Groot olifanttroppe vir modderbaddens.", lat: -24.8715, lon: 31.5348, animals: ["Olifant","Buffel","Sebras","Blouwildebees","Kameelperd"] },
            { name: "Silolweni Dam", region: "skukuza", location: "S1 Salitje loop", facts: "Groot dam; baie seekoeie en krokodille.", lat: -25.0450, lon: 31.4911, animals: ["Seekoei","Krokodil","Olifant","Waterbok","Sadelbekooievaar"] },
            { name: "Sunset Dam", region: "lower-sabie", location: "By Laer Sabie", facts: "Ikonies vir fotografie; roofdiere teen skemer.", lat: -25.1233, lon: 31.9160, animals: ["Seekoei","Krokodil","Olifant","Leeus","Luiperd","Voëls"] },
            { name: "Duke se Watergat", region: "lower-sabie", location: "S128 oos van Laer Sabie", facts: "Gepaste vir jagluiperd; groot buffeltroppe.", lat: -25.1768, lon: 31.8499, animals: ["Jagluiperd","Leeus","Buffel","Sebras","Blouwildebees","Kameelperd"] },
            { name: "N'watimhiri Laevlakdrif", region: "lower-sabie", location: "H4-2 laagwaterbrug", facts: "Uitstekend vir roofdiere; riete vir skuiling.", lat: -25.1095, lon: 31.9540, animals: ["Leeus","Luiperd","Waterbok","Olifant","Buffel"] },
            { name: "N'wanetsi Piekniek & Watergat", region: "satara", location: "H1-4 oos van Satara", facts: "Bekend vir groot leeubroeisels.", lat: -24.4321, lon: 31.8345, animals: ["Leeus","Olifant","Seekoei","Koedoe","Waterbok","Kameelperd"] },
            { name: "Sweni Skuiling", region: "satara", location: "S126 op Swenirivier", facts: "Sweni-trop leeus gereeld; kans vir luiperd.", lat: -24.4710, lon: 31.7905, animals: ["Leeus","Luiperd","Olifant","Bobbejaan","Impala","Koedoe"] },
            { name: "Girivana Watergat", region: "satara", location: "H1-4 noord van Satara", facts: "Betroubaar vir groot grasvretende troppe en roofdiere.", lat: -24.2882, lon: 31.7511, animals: ["Sebras","Blouwildebees","Kameelperd","Buffel","Leeus","Hiëna"] }
        ];

        const waterholeGrid = document.getElementById('waterhole-grid');
        const searchInput = document.getElementById('waterhole-search');
        const suggestionsList = document.getElementById('search-suggestions');
        const regionFilters = document.getElementById('region-filters');
        let currentRegion = 'all';

        function createWaterholeCard(hole) {
            const card = document.createElement('div');
            card.className = 'p-4 rounded-lg border border-slate-700 bg-slate-800/70 text-left transition transform hover:-translate-y-0.5 focus-within:ring-2 focus-within:ring-blue-500';
            card.setAttribute('data-name', hole.name.toLowerCase());
            card.innerHTML = `
                <div class="flex items-start justify-between">
                    <h3 class="text-slate-100 font-semibold text-lg">${hole.name}</h3>
                    <span class="text-xs px-2 py-1 rounded bg-slate-700 text-slate-300">${
                        hole.region === 'malelane' ? 'Malelane / Berg-en-Dal'
                      : hole.region === 'skukuza' ? 'Skukuza'
                      : hole.region === 'lower-sabie' ? 'Laer Sabie'
                      : 'Satara'
                    }</span>
                </div>
                <div class="mt-2 text-slate-300"><span class="text-slate-400">Ligging:</span> ${hole.location}</div>
                <div class="mt-2 text-slate-300"><span class="text-slate-400">Feite:</span> ${hole.facts}</div>
                ${hole.lat && hole.lon ? `
                <div class="mt-2 text-slate-300"><span class="text-slate-400">Koördinate:</span> ${hole.lat.toFixed(4)}, ${hole.lon.toFixed(4)}</div>
                <div class="mt-3">
                    <a href="https://www.google.com/maps?q=${hole.lat},${hole.lon}" target="_blank" class="inline-flex items-center px-3 py-1.5 rounded-md bg-blue-600 text-white text-sm hover:bg-blue-500">Open in Google Maps</a>
                </div>` : ''}
                <div class="mt-3 flex flex-wrap gap-2">
                    ${hole.animals.map(a => `<span class="text-xs bg-blue-600/20 text-blue-200 px-2 py-1 rounded">${a}</span>`).join('')}
                </div>
            `;
            return card;
        }

        function renderWaterholes(list) {
            if (!waterholeGrid) return;
            waterholeGrid.innerHTML = '';
            list.forEach(h => waterholeGrid.appendChild(createWaterholeCard(h)));
        }

        function regionFilterPredicate(h) {
            if (currentRegion === 'all') return true;
            if (currentRegion === 'malelane') return h.region === 'malelane' || h.region === 'berg-en-dal';
            return h.region === currentRegion;
        }

        function rerender() {
            const base = waterholesData.filter(regionFilterPredicate);
            const q = (searchInput?.value || '').trim().toLowerCase();
            const filtered = q ? base.filter(h => h.name.toLowerCase().includes(q)) : base;
            renderWaterholes(filtered);
            // update suggestions to respect region
            if (q) {
                const matches = base.filter(h => h.name.toLowerCase().includes(q)).slice(0, 8);
                showSuggestions(matches);
            } else {
                showSuggestions([]);
            }
        }

        function showSuggestions(matches) {
            if (!matches.length) {
                suggestionsList.classList.add('hidden');
                suggestionsList.innerHTML = '';
                return;
            }
            suggestionsList.innerHTML = matches.map((m, idx) => `
                <li data-index="${idx}" class="px-3 py-2 cursor-pointer hover:bg-slate-700">${m.name}</li>
            `).join('');
            suggestionsList.classList.remove('hidden');
        }

        function highlightCardByName(name) {
            const cards = waterholeGrid.querySelectorAll('[data-name]');
            let target = null;
            cards.forEach(c => {
                const match = c.getAttribute('data-name') === name.toLowerCase();
                if (match) target = c;
                c.classList.remove('ring-2','ring-blue-400','animate-pulse');
            });
            if (target) {
                target.classList.add('ring-2','ring-blue-400');
                target.scrollIntoView({ behavior: 'smooth', block: 'center' });
                target.animate([
                    { transform: 'scale(1)', boxShadow: '0 0 0 0 rgba(59,130,246,0)' },
                    { transform: 'scale(1.02)', boxShadow: '0 0 0 8px rgba(59,130,246,0.2)' },
                    { transform: 'scale(1)', boxShadow: '0 0 0 0 rgba(59,130,246,0)' }
                ], { duration: 700, easing: 'ease-out' });
            }
        }

        // Initial render
        if (waterholeGrid) {
            renderWaterholes(waterholesData);
        }

        // Search interactions
        if (searchInput) {
            let activeIndex = -1;
            searchInput.addEventListener('input', (e) => {
                const q = e.target.value.trim().toLowerCase();
                activeIndex = -1;
                if (!q) { showSuggestions([]); return; }
                const base = waterholesData.filter(regionFilterPredicate);
                const matches = base.filter(h => h.name.toLowerCase().includes(q)).slice(0, 8);
                showSuggestions(matches);
            });

            searchInput.addEventListener('keydown', (e) => {
                const items = Array.from(suggestionsList.querySelectorAll('li'));
                if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    activeIndex = (activeIndex + 1) % (items.length || 1);
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    activeIndex = (activeIndex - 1 + (items.length || 1)) % (items.length || 1);
                } else if (e.key === 'Enter') {
                    if (items.length) {
                        e.preventDefault();
                        const name = (activeIndex >= 0 ? items[activeIndex].textContent : searchInput.value).trim();
                        const found = waterholesData.find(h => h.name.toLowerCase() === name.toLowerCase());
                        if (found) highlightCardByName(found.name);
                        suggestionsList.classList.add('hidden');
                    }
                }
                items.forEach((el, idx) => {
                    el.classList.toggle('bg-slate-700', idx === activeIndex);
                });
            });

            suggestionsList.addEventListener('click', (e) => {
                const li = e.target.closest('li');
                if (!li) return;
                const name = li.textContent.trim();
                searchInput.value = name;
                const found = waterholesData.find(h => h.name.toLowerCase() === name.toLowerCase());
                if (found) highlightCardByName(found.name);
                suggestionsList.classList.add('hidden');
            });
        }

        // Region filter interactions
        if (regionFilters) {
            regionFilters.addEventListener('click', (e) => {
                const btn = e.target.closest('button[data-region]');
                if (!btn) return;
                currentRegion = btn.getAttribute('data-region');
                Array.from(regionFilters.querySelectorAll('button')).forEach(b => b.classList.remove('ring-2','ring-blue-400','bg-slate-600'));
                btn.classList.add('ring-2','ring-blue-400','bg-slate-600');
                rerender();
            });
        }
    </script>

</body>
</html>
