<! DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Casino Blackjack</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@400;700&display=swap');
        body {
            background: linear-gradient(135deg, #0a2f2a, #003d33); /* Deep casino gradient */
            color: #FFD700; /* Gold text */
            font-family: 'Roboto Condensed', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            text-align: center;
            overflow: auto;
        }
        h1 {
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.8);
            font-size: 2.8em;
            margin-bottom: 20px;
            animation: glow 2s ease-in-out infinite alternate;
        }
        @keyframes glow {
            from { text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.8); }
            to { text-shadow: 3px 3px 12px rgba(255, 215, 0, 1); }
        }
        #game {
            background: #145214; /* Deep green table */
            padding: 25px;
            border: 10px solid #FFD700;
            border-radius: 20px;
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.7), inset 0 0 15px rgba(0, 0, 0, 0.6);
            width: 90%;
            max-width: 700px;
            perspective: 1200px;
        }
        #player-hand, #dealer-hand {
            margin: 25px 0;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
        }
        .card {
            background: linear-gradient(145deg, #ffffff, #f8f8f8); /* Clean card white */
            width: 90px;
            height: 135px;
            border: 2px solid #FFD700;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 10px;
            font-size: 24px;
            font-weight: 700;
            color: #000;
            box-shadow: 6px 6px 20px rgba(0, 0, 0, 0.5), inset 2px 2px 5px rgba(255, 255, 255, 0.5);
            transform: rotateY(0deg);
            transition: transform 0.4s, box-shadow 0.4s;
            box-sizing: border-box;
            animation: deal 0.5s ease-out;
            position: relative;
        }
        @keyframes deal {
            from { transform: translateY(-100px) rotateY(90deg); opacity: 0; }
            to { transform: translateY(0) rotateY(0deg); opacity: 1; }
        }
        .card:hover {
            transform: translateY(-10px) rotateY(15deg);
            box-shadow: 10px 10px 25px rgba(255, 215, 0, 0.8);
        }
        .card.spade, .card.club {
            color: #000;
        }
        .card.heart, .card.diamond {
            color: #c62828; /* Deep red */
        }
        .card .suit {
            font-size: 40px; /* Large suit symbol */
            text-align: center;
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .card .value-top, .card .value-bottom {
            font-size: 24px; /* Larger values */
            line-height: 1;
            font-weight: 700;
        }
        .card .value-bottom {
            transform: rotate(180deg);
            align-self: flex-end;
        }
        .card.hidden {
            background: linear-gradient(145deg, #8B0000, #B22222); /* Red card back */
            box-shadow: 6px 6px 20px rgba(0, 0, 0, 0.5);
        }
        .card.hidden .value-top, .card.hidden .value-bottom, .card.hidden .suit {
            display: none;
        }
        #player-score, #dealer-score, #tokens, #score {
            font-size: 24px;
            margin: 10px 0;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.7);
        }
        #status {
            font-size: 28px;
            margin: 20px 0;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.7);
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.06); }
            100% { transform: scale(1); }
        }
        .controls, .bet-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 15px 0;
        }
        button {
            background: linear-gradient(45deg, #FFD700, #FFA500);
            color: #0a2f2a;
            font-family: 'Roboto Condensed', sans-serif;
            font-size: 20px;
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            box-shadow: 6px 6px 20px rgba(0, 0, 0, 0.5);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        button:hover {
            transform: translateY(-4px);
            box-shadow: 10px 10px 25px rgba(255, 215, 0, 0.8);
        }
        button:disabled {
            background: #555;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .bet-controls button {
            background: linear-gradient(45deg, #4682b4, #87ceeb); /* Blue for bet buttons */
        }
        .bet-controls button:hover {
            box-shadow: 10px 10px 25px rgba(135, 206, 235, 0.8);
        }
        @media (max-width: 600px) {
            #game {
                padding: 15px;
            }
            .card {
                width: 65px;
                height: 97px;
                font-size: 16px;
            }
            .card .suit {
                font-size: 28px;
            }
            .card .value-top, .card .value-bottom {
                font-size: 16px;
            }
            h1 {
                font-size: 8vw;
            }
            #status, #player-score, #dealer-score, #tokens, #score {
                font-size: 6vw;
            }
            button {
                font-size: 5vw;
                padding: 10px 20px;
            }
        }
    </style>
</head>
<body>
    <h1>Casino Blackjack</h1>
    <div id="game">
        <div id="dealer-hand"></div>
        <div id="dealer-score">Dealer Score: 0</div>
        <div id="player-hand"></div>
        <div id="player-score">Your Score: 0</div>
        <div id="tokens">Tokens: 1000</div>
        <div id="score">Wins: 0 | Losses: 0 | Pushes: 0</div>
        <div id="status">Select a bet to start!</div>
        <div class="bet-controls">
            <button id="bet10" disabled>Bet 10</button>
            <button id="bet50" disabled>Bet 50</button>
            <button id="bet100" disabled>Bet 100</button>
            <button id="bet500" disabled>Bet 500</button>
        </div>
        <div class="controls">
            <button id="hit" disabled>Hit</button>
            <button id="stand" disabled>Stand</button>
            <button id="nextHand" disabled>Next Hand</button>
            <button id="newGame">New Game</button>
        </div>
    </div>
    <script>
        const suits = {
            spade: '♠',
            heart: '♥',
            club: '♣',
            diamond: '♦'
        };
        const values = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
        let deck = [];
        let playerHand = [];
        let dealerHand = [];
        let gameActive = false;
        let currentBet = 0;
        let tokens = 1000;
        let score = { wins: 0, losses: 0, pushes: 0 };
        const playerHandDiv = document.getElementById('player-hand');
        const dealerHandDiv = document.getElementById('dealer-hand');
        const playerScoreDiv = document.getElementById('player-score');
        const dealerScoreDiv = document.getElementById('dealer-score');
        const tokensDiv = document.getElementById('tokens');
        const scoreDiv = document.getElementById('score');
        const statusDiv = document.getElementById('status');
        const hitButton = document.getElementById('hit');
        const standButton = document.getElementById('stand');
        const nextHandButton = document.getElementById('nextHand');
        const newGameButton = document.getElementById('newGame');
        const betButtons = {
            10: document.getElementById('bet10'),
            50: document.getElementById('bet50'),
            100: document.getElementById('bet100'),
            500: document.getElementById('bet500')
        };

        hitButton.addEventListener('click', hit);
        standButton.addEventListener('click', stand);
        nextHandButton.addEventListener('click', nextHand);
        newGameButton.addEventListener('click', newGame);
        Object.values(betButtons).forEach(button => {
            button.addEventListener('click', () => placeBet(parseInt(button.textContent.split(' ')[1])));
        });

        function createDeck() {
            deck = [];
            for (let suit in suits) {
                for (let value of values) {
                    deck.push({ suit, value });
                }
            }
            deck = deck.sort(() => Math.random() - 0.5);
        }

        function getCardValue(card) {
            if (['J', 'Q', 'K'].includes(card.value)) return 10;
            if (card.value === 'A') return 11;
            return parseInt(card.value);
        }

        function calculateScore(hand) {
            let score = 0;
            let aces = 0;
            for (let card of hand) {
                if (card.value === 'A') {
                    aces++;
                    score += 11;
                } else {
                    score += getCardValue(card);
                }
            }
            while (score > 21 && aces > 0) {
                score -= 10;
                aces--;
            }
            return score;
        }

        function hasSoft17(hand) {
            let score = calculateScore(hand);
            let aces = hand.filter(card => card.value === 'A').length;
            return score === 17 && aces > 0;
        }

        function estimateBustProbability(score, deck) {
            let highCards = deck.filter(card => {
                let value = getCardValue(card);
                return (value === 10 || card.value === 'A') && (score + value > 21);
            }).length;
            return highCards / deck.length;
        }

        function renderHand(hand, container, hideFirst = false) {
            container.innerHTML = '';
            hand.forEach((card, index) => {
                const cardDiv = document.createElement('div');
                cardDiv.classList.add('card', card.suit);
                if (hideFirst && index === 0) {
                    cardDiv.classList.add('hidden');
                } else {
                    cardDiv.innerHTML = `
                        <div class="value-top">${card.value}</div>
                        <div class="suit">${suits[card.suit]}</div>
                        <div class="value-bottom">${card.value}</div>
                    `;
                }
                container.appendChild(cardDiv);
            });
        }

        function updateScores() {
            playerScoreDiv.textContent = `Your Score: ${calculateScore(playerHand)}`;
            dealerScoreDiv.textContent = `Dealer Score: ${dealerHand.length > 0 ? (gameActive ? '?' : calculateScore(dealerHand)) : 0}`;
            tokensDiv.textContent = `Tokens: ${tokens}`;
            scoreDiv.textContent = `Wins: ${score.wins} | Losses: ${score.losses} | Pushes: ${score.pushes}`;
        }

        function placeBet(amount) {
            if (tokens < amount) {
                statusDiv.textContent = 'Not enough tokens!';
                return;
            }
            currentBet = amount;
            tokens -= currentBet;
            startHand();
        }

        function hit() {
            if (!gameActive) return;
            playerHand.push(deck.pop());
            renderHand(playerHand, playerHandDiv);
            updateScores();
            if (calculateScore(playerHand) > 21) {
                score.losses++;
                endGame(`You bust! Dealer wins. (-${currentBet} tokens)`);
            }
        }

        function stand() {
            if (!gameActive) return;
            gameActive = false;
            hitButton.disabled = true;
            standButton.disabled = true;
            dealerTurn();
        }

        function dealerTurn() {
            renderHand(dealerHand, dealerHandDiv);
            let playerScore = calculateScore(playerHand);
            while (true) {
                let dealerScore = calculateScore(dealerHand);
                if (dealerScore > 21) {
                    tokens += currentBet * 2;
                    score.wins++;
                    endGame(`Dealer busts! You win! (+${currentBet} tokens)`);
                    return;
                }
                if (hasSoft17(dealerHand) || dealerScore < 17) {
                    dealerHand.push(deck.pop());
                    renderHand(dealerHand, dealerHandDiv);
                    continue;
                }
                if (dealerScore >= 17 && dealerScore <= 21) {
                    let bustProbability = estimateBustProbability(dealerScore, deck);
                    if (playerScore >= 18 && dealerScore < playerScore && bustProbability < 0.4) {
                        dealerHand.push(deck.pop());
                        renderHand(dealerHand, dealerHandDiv);
                        continue;
                    }
                    break;
                }
            }
            updateScores();
            let dealerScore = calculateScore(dealerHand);
            if (playerScore > dealerScore) {
                tokens += currentBet * 2;
                score.wins++;
                endGame(`You win! (+${currentBet} tokens)`);
            } else if (dealerScore > playerScore) {
                score.losses++;
                endGame(`Dealer wins! (-${currentBet} tokens)`);
            } else {
                tokens += currentBet;
                score.pushes++;
                endGame(`Push! (${currentBet} tokens returned)`);
            }
        }

        function endGame(message) {
            gameActive = false;
            hitButton.disabled = true;
            standButton.disabled = true;
            nextHandButton.disabled = tokens < 10;
            Object.values(betButtons).forEach(button => {
                const amount = parseInt(button.textContent.split(' ')[1]);
                button.disabled = tokens < amount;
            });
            statusDiv.textContent = message;
            renderHand(dealerHand, dealerHandDiv);
            updateScores();
        }

        function startHand() {
            createDeck();
            playerHand = [deck.pop(), deck.pop()];
            dealerHand = [deck.pop(), deck.pop()];
            gameActive = true;
            hitButton.disabled = false;
            standButton.disabled = false;
            nextHandButton.disabled = true;
            Object.values(betButtons).forEach(button => button.disabled = true);
            renderHand(playerHand, playerHandDiv);
            renderHand(dealerHand, dealerHandDiv, true);
            updateScores();
            statusDiv.textContent = 'Your turn!';
            if (calculateScore(playerHand) === 21) {
                tokens += currentBet * 3; // 2:1 for Blackjack
                score.wins++;
                endGame(`Blackjack! You win! (+${currentBet * 2} tokens)`);
            }
        }

        function nextHand() {
            playerHand = [];
            dealerHand = [];
            currentBet = 0;
            gameActive = false;
            hitButton.disabled = true;
            standButton.disabled = true;
            nextHandButton.disabled = true;
            Object.values(betButtons).forEach(button => {
                const amount = parseInt(button.textContent.split(' ')[1]);
                button.disabled = tokens < amount;
            });
            renderHand(playerHand, playerHandDiv);
            renderHand(dealerHand, dealerHandDiv);
            updateScores();
            statusDiv.textContent = 'Select a bet to start!';
        }

        function newGame() {
            tokens = 1000;
            score = { wins: 0, losses: 0, pushes: 0 };
            nextHand();
        }

        // Initialize bet buttons
        newGame();
    </script>
</body>
</html>