<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Hex Casino Game</title>
  <style>
    body {
      background-color: green;
      color: white;
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 20px;
    }

    h1 {
      margin-bottom: 10px;
    }

    .players {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-bottom: 20px;
    }

    .player {
      padding: 10px 20px;
      border: 2px solid white;
      border-radius: 10px;
      background-color: darkgreen;
      min-width: 100px;
    }

    .active {
      background-color: goldenrod;
    }

    .board {
      display: grid;
      grid-template-columns: repeat(5, 60px);
      grid-gap: 5px;
      justify-content: center;
      margin-bottom: 20px;
    }

    .hex {
      width: 60px;
      height: 52px;
      background-color: #004d00;
      clip-path: polygon(
        50% 0%,
        93% 25%,
        93% 75%,
        50% 100%,
        7% 75%,
        7% 25%
      );
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      cursor: pointer;
      color: white;
    }

    .hex.taken {
      cursor: default;
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 5px;
      border: none;
      background-color: goldenrod;
      cursor: pointer;
    }

    /* Yellow filled equilateral triangle symbol */
    .triangle {
      width: 0;
      height: 0;
      border-left: 12px solid transparent;
      border-right: 12px solid transparent;
      border-bottom: 20px solid yellow;
      display: inline-block;
    }

  </style>
</head>
<body>
  <h1>Hex Casino Game</h1>

  <div class="players">
    <div id="playerX" class="player active">Player X<br>X</div>
    <div id="playerO" class="player">Player O<br>O</div>
    <div id="playerT" class="player">Player ▲<br><span class="triangle"></span></div>
  </div>

  <div id="board" class="board"></div>

  <button onclick="resetGame()">Reset Game</button>

  <h2 id="status"></h2>

  <script>
    const boardSize = 5; // 5x5 hex grid
    const winLength = 4;
    const symbols = ["X", "O", "▲"];
    const playerIds = ["playerX", "playerO", "playerT"];
    let currentPlayer = 0;
    let board = [];

    function createBoard() {
      const boardEl = document.getElementById("board");
      boardEl.innerHTML = "";
      board = Array.from({ length: boardSize }, () =>
        Array(boardSize).fill(null)
      );

      for (let r = 0; r < boardSize; r++) {
        for (let c = 0; c < boardSize; c++) {
          const hex = document.createElement("div");
          hex.className = "hex";
          hex.dataset.row = r;
          hex.dataset.col = c;
          hex.addEventListener("click", handleMove);
          boardEl.appendChild(hex);
        }
      }
      updatePanels();
      document.getElementById("status").textContent = "Player X's turn";
    }

    function updatePanels() {
      playerIds.forEach((id, i) => {
        const el = document.getElementById(id);
        el.classList.toggle("active", i === currentPlayer);
      });
    }

    function handleMove(e) {
      const row = parseInt(e.target.dataset.row);
      const col = parseInt(e.target.dataset.col);

      if (board[row][col] !== null) return;

      const symbol = symbols[currentPlayer];
      board[row][col] = symbol;

      if (symbol === "▲") {
        const tri = document.createElement("span");
        tri.className = "triangle";
        e.target.innerHTML = "";
        e.target.appendChild(tri);
      } else {
        e.target.textContent = symbol;
      }
      e.target.classList.add("taken");

      if (checkWin(row, col)) {
        document.getElementById("status").textContent =
          `Player ${symbol} wins!`;
        disableBoard();
        return;
      }

      currentPlayer = (currentPlayer + 1) % symbols.length;
      updatePanels();
      document.getElementById("status").textContent =
        `Player ${symbols[currentPlayer]}'s turn`;
    }

    function disableBoard() {
      document.querySelectorAll(".hex").forEach(h => h.style.pointerEvents = "none");
    }

    function resetGame() {
      currentPlayer = 0;
      createBoard();
    }

    function checkWin(row, col) {
      const symbol = board[row][col];
      const directions = [
        [1, 0], [0, 1], [1, -1], [1, 1], [-1, 0], [0, -1]
      ];

      for (let [dr, dc] of directions) {
        let count = 1;
        count += countDirection(row, col, dr, dc, symbol);
        count += countDirection(row, col, -dr, -dc, symbol);
        if (count >= winLength) return true;
      }
      return false;
    }

    function countDirection(r, c, dr, dc, symbol) {
      let count = 0;
      let nr = r + dr;
      let nc = c + dc;
      while (
        nr >= 0 &&
        nr < boardSize &&
        nc >= 0 &&
        nc < boardSize &&
        board[nr][nc] === symbol
      ) {
        count++;
        nr += dr;
        nc += dc;
      }
      return count;
    }

    createBoard();
  </script>
</body>
</html>