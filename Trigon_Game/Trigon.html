<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Triple Tic Tac Toe — Casino Style (n=4)</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="images/Trigon_Logo.png">
</head>
<body>
  <div class="casino-table" role="application" aria-label="Triple Tic Tac Toe Casino">
    <button class="help-btn" id="help-btn" aria-label="How to play">?</button>
    <h1>TRIGON</h1>

    <!-- Fireworks container -->
    <div id="fireworks-container"></div>

    <!-- Players left -> right -->
    <div class="players" id="players">
      <div class="player player-1 active" id="playerCard0">
        <div class="player-header">
          <h2 class="name" id="pname0">Player X</h2>
          <span class="edit-name-icon" role="button" tabindex="0" aria-label="Edit Player X Name">✏️</span>
        </div>
        <p class="mark">X</p>
        <p class="wins">Wins: <span id="pw0">0</span></p>
      </div>

      <div class="player player-2" id="playerCard1">
        <div class="player-header">
          <h2 class="name" id="pname1">Player O</h2>
          <span class="edit-name-icon" role="button" tabindex="0" aria-label="Edit Player O Name">✏️</span>
        </div>
        <p class="mark">O</p>
        <p class="wins">Wins: <span id="pw1">0</span></p>
      </div>

      <div class="player player-3" id="playerCard2">
        <div class="player-header">
          <h2 class="name" id="pname2">Player Δ</h2>
          <span class="edit-name-icon" role="button" tabindex="0" aria-label="Edit Player Δ Name">✏️</span>
        </div>
        <p class="mark">Δ</p>
        <p class="wins">Wins: <span id="pw2">0</span></p>
      </div>
    </div>

    <div id="game-status">Player X's turn <span id="timer-display">10</span></div>

    <div class="game-area">
      <div class="board-wrap">
        <svg id="board" role="grid" aria-label="Hex board"></svg>
      </div>

      <div class="move-history" id="move-history" aria-hidden="false"></div>

      <div class="controls">
        <button id="btn-undo">Undo</button>
        <button id="btn-new-round">New Round</button>
        <button id="btn-new-game">New Game</button>
      </div>
    </div>
  </div>

  <!-- Setup Modal -->
  <div id="setup-modal" class="help-modal" role="dialog" aria-modal="true" aria-labelledby="setup-title">
    <div class="help-panel" tabindex="-1">
      <h3 id="setup-title">Game Setup</h3>
      <div class="setup-row" style="margin:.6rem 0;">
        <label for="pname-0">Player X name</label>
        <input id="pname-0" type="text" class="setup-input" placeholder="Player X" style="width:100%; padding:.6rem .7rem; border:2px solid var(--gold); border-radius:8px; background:var(--light-gold); color:#222; font-family:'Lato',sans-serif;">
      </div>
      <div class="setup-row" style="margin:.6rem 0;">
        <label for="pname-1">Player O name</label>
        <input id="pname-1" type="text" class="setup-input" placeholder="Player O" style="width:100%; padding:.6rem .7rem; border:2px solid var(--gold); border-radius:8px; background:var(--light-gold); color:#222; font-family:'Lato',sans-serif;">
      </div>
      <div class="setup-row" style="margin:.6rem 0;">
        <label for="pname-2">Player Δ name</label>
        <input id="pname-2" type="text" class="setup-input" placeholder="Player Δ" style="width:100%; padding:.6rem .7rem; border:2px solid var(--gold); border-radius:8px; background:var(--light-gold); color:#222; font-family:'Lato',sans-serif;">
      </div>
      <div class="help-actions">
        <button id="confirm-setup" class="close-help">Start</button>
      </div>
    </div>
  </div>
  <!-- Help Modal -->
  <div id="help-modal" class="help-modal" role="dialog" aria-modal="true" aria-labelledby="help-title">
    <div class="help-panel" tabindex="-1">
      <h3 id="help-title">How to Play: TRIGON</h3>
      <p>Three-player Tic Tac Toe on a hex grid. Play as X, O, or Δ and get four-in-a-row along any straight line on the hex grid to win.</p>
      <h4>Setup</h4>
      <ul>
        <li>Players: X, O, and Δ. Rename via the pencil icons.</li>
        <li>Win tally is shown under each player card.</li>
      </ul>
      <h4>Gameplay</h4>
      <ul>
        <li>Players take turns placing their mark on any empty hex.</li>
        <li>Timer enforces quick turns. If time runs out, a random move is placed.</li>
        <li>When the board nears full, the oldest move is removed to keep the game flowing.</li>
      </ul>
      <h4>Win</h4>
      <ul>
        <li>Make a straight line of four of your marks in any of the three hex directions.</li>
        <li>Use New Round to rotate the starting player; New Game resets scores.</li>
      </ul>
      <div class="help-actions">
        <button id="close-help" class="close-help">Got it</button>
      </div>
    </div>
  </div>

<script src="script.js"></script>
</body>
</html>